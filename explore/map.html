<!doctype html>
<html lang="zh-CN">
<head>
<meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>Dodva Â· LEAF åœ°å›¾</title>
<link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"/>
<style>
  html,body,#map{height:100%;margin:0;background:#0b0f1a}
  .top{position:fixed;left:12px;top:12px;z-index:1000;color:#eaf2ff;
       background:rgba(10,16,34,.55);backdrop-filter:blur(8px);
       border:1px solid rgba(147,197,253,.18);border-radius:10px;padding:6px 10px}
  .status{position:fixed;right:12px;bottom:12px;z-index:1000;color:#eaf2ff;
       background:rgba(10,16,34,.55);border:1px solid rgba(147,197,253,.18);
       border-radius:10px;padding:6px 10px;font-size:12px;white-space:pre-wrap}
  .beacon{width:14px;height:14px;border-radius:50%;position:relative}
  .rose{background:radial-gradient(circle at 30% 30%,#fff,#ffb3d9 45%,#ff6bb3 62%,#140915 72%)}
  .blue{background:radial-gradient(circle at 30% 30%,#fff,#7dd3fc 45%,#0ea5e9 62%,#0b0b12 72%)}
  .pulse::before,.pulse::after{content:'';position:absolute;left:50%;top:50%;
    transform:translate(-50%,-50%);width:14px;height:14px;border-radius:50%;
    border:2px solid rgba(255,255,255,.5);animation:wave 2.6s ease-out infinite}
  .pulse::after{animation-delay:1.3s;opacity:.7}
  @keyframes wave{0%{width:14px;height:14px;opacity:.9}100%{width:100px;height:100px;opacity:0}}
</style>
</head>
<body>
<div id="map"></div>
<div class="top"><a href="explore.html" style="color:#cde3ff;text-decoration:none">â† è¿”å›æ¢ç´¢</a></div>
<div id="status" class="status">åŠ è½½ä¸­â€¦</div>

<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js" defer onerror="document.getElementById('status').textContent='Leaflet è½½å…¥å¤±è´¥ï¼Œè¯·æ£€æŸ¥ç½‘ç»œ/CDN'"></script>
<script>
document.addEventListener('DOMContentLoaded', function(){
  function err(s){ const st=document.getElementById('status'); st && (st.textContent=s); }
  if(!window.L){ setTimeout(()=>{ if(!window.L) err('Leaflet æœªåŠ è½½ï¼ˆç½‘ç»œæˆ– CDN æ‹¦æˆªï¼‰'); }, 1200); return; }

  const LIGHTS = {
    A:{name:'A Â· ç«ç‘°åˆé‡', lat:48.8566, lng:  2.3522, note:'ç¬¬ä¸€çœ¼å°±å¿ƒåŠ¨', cls:'rose'},
    B:{name:'B Â· æå…‰æ™¨å…‰', lat:64.1466, lng:-21.9426, note:'æå…‰é€€åœºï¼Œæ™¨å…‰ä½œè¯', cls:'blue'},
    C:{name:'C Â· æµ·è¾¹æ‹¥æŠ±', lat:18.2528, lng:109.5119, note:'è½æ—¥æŠŠæˆ‘ä»¬æŠ±ç´§', cls:'rose'},
    D:{name:'D Â· é›¨å¤œå¿ƒè·³', lat:35.0116, lng:135.7681, note:'é›¨å£°é‡Œæœ‰ä½ çš„å¿ƒè·³', cls:'blue'}
  };

  const map = L.map('map',{minZoom:2,maxZoom:19});
  L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png',{
    attribution:'Â© OpenStreetMap'}).addTo(map);

  const bounds = L.latLngBounds(Object.values(LIGHTS).map(t=>[t.lat,t.lng]));
  map.fitBounds(bounds.pad(0.35));

  const icon = cls=>L.divIcon({className:'',html:`<div class="beacon ${cls} pulse"></div>`,iconSize:[14,14],iconAnchor:[7,7]});
  const markers = {};
  for (const k in LIGHTS){
    const t=LIGHTS[k];
    markers[k]=L.marker([t.lat,t.lng],{icon:icon(t.cls)})
      .addTo(map)
      .bindPopup(`<b>${t.name}</b><br>Lat ${t.lat.toFixed(5)}, Lng ${t.lng.toFixed(5)}<br>${t.note||''}`);
  }
  L.polyline(['A','B','C','D'].map(k=>[LIGHTS[k].lat,LIGHTS[k].lng]),
    {color:'#93c5fd',weight:3,opacity:.9}).addTo(map);

  map.on('dblclick', e=>{
    const s = `ğŸ“ åŒå‡»åæ ‡\nLat ${e.latlng.lat.toFixed(6)}, Lng ${e.latlng.lng.toFixed(6)}`;
    document.getElementById('status').textContent = s;
  });
  document.getElementById('status').textContent = 'åŒå‡»åœ°å›¾ä»»æ„å¤„ï¼Œå¯å¤åˆ¶åæ ‡æ›¿æ¢æˆæˆ‘ä»¬çš„ç§å¯†åœ°ç‚¹ ğŸ’';
});
</script>
</body>
</html>
