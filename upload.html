<!doctype html>
<html lang="zh-CN">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>提交梦境 · Dodva Universe</title>
  <link rel="stylesheet" href="style.css">
  <style>
    .container {max-width: 680px; margin: 40px auto; padding: 20px;}
    .card {background: rgba(255,255,255,0.05); border-radius: 12px; padding: 20px;}
    label {display: block; margin-bottom: 14px;}
    input, textarea {
      width: 100%;
      padding: 10px;
      border: 1px solid rgba(255,255,255,0.2);
      border-radius: 8px;
      background: rgba(0,0,0,0.25);
      color: #fff;
    }
    button {
      padding: 10px 16px;
      border: none;
      border-radius: 8px;
      background: rgba(255,255,255,0.15);
      color: #fff;
      cursor: pointer;
    }
    button:hover {background: rgba(255,255,255,0.25);}
  </style>
</head>
<body>

<header>
  <div>🌌 Dodva Universe</div>
  <nav>
    <a href="index.html">首页</a>
    <a href="dream-map.html">Dream Map</a>
    <a href="gallery.html">Gallery</a>
  </nav>
</header>

<div class="container">
  <div class="card">
    <h2>📝 提交梦境</h2>

<form id="dreamForm">
  <label>
    昵称：
    <input type="text" name="nickname" placeholder="你的名字" required>
  </label>
  <label>
    梦境标题：
    <input type="text" name="title" placeholder="梦境标题" required>
  </label>
  <label>
    梦境描述：
    <textarea name="description" rows="5" placeholder="写下画面、情绪、启示…" required></textarea>
  </label>
  <label>
    关键词（逗号分隔）：
    <input type="text" name="tags" placeholder="星云,海岛,玫瑰">
  </label>
  <label>
    纬度：
    <input type="number" name="lat" step="0.0001" placeholder="如 22.33">
  </label>
  <label>
    经度：
    <input type="number" name="lng" step="0.0001" placeholder="如 55.66">
  </label>
  <label>
    图片链接：
    <input type="url" name="image" placeholder="https://...">
  </label>
  <button type="submit">✨ 发布梦境</button>
</form>

<script>
document.getElementById('dreamForm').addEventListener('submit', async function(e) {
  e.preventDefault();

  const formData = new FormData(e.target);
  const dream = {
    id: Date.now(),
    nickname: formData.get('nickname'),
    title: formData.get('title'),
    description: formData.get('description'),
    tags: formData.get('tags').split(',').map(t => t.trim()),
    lat: parseFloat(formData.get('lat') || 0),
    lng: parseFloat(formData.get('lng') || 0),
    image: formData.get('image') || "",
    createdAt: new Date().toISOString()
  };

  // 发到 Zapier Webhook（替换为你的 Zapier Webhook URL）
  const res = await fetch('https://hooks.zapier.com/hooks/catch/你的ID', {
    method: 'POST',
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify(dream)
  });

  if (res.ok) {
    alert('✅ 梦境提交成功！');
    e.target.reset();
  } else {
    alert('❌ 提交失败，请重试');
  }
});
</script>