<!doctype html>
<html lang="zh-CN">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>Dodva Â· ä»Šæ—¥èƒ½é‡å¡</title>
<style>
  :root{--bg:#0b0f1a;--fg:#eaf2ff;--mut:#a3b4d8;--line:#2a2f48}
  html,body{margin:0;background:var(--bg);color:var(--fg);font:16px/1.6 system-ui,-apple-system,Segoe UI,Roboto,Arial}
  header{position:sticky;top:0;z-index:5;display:flex;gap:8px;align-items:center;justify-content:space-between;
    padding:10px 14px;background:linear-gradient(180deg,rgba(14,14,22,.7),rgba(14,14,22,.45));backdrop-filter:blur(8px);border-bottom:1px solid var(--line)}
  .row{display:flex;gap:8px;align-items:center;flex-wrap:wrap}
  .btn{border:1px solid #3b3f59;border-radius:10px;padding:7px 12px;background:#12121b;color:#eaf2ff;cursor:pointer;text-decoration:none}
  .wrap{max-width:900px;margin:0 auto;padding:16px}
  .card{border:1px solid var(--line);border-radius:16px;padding:16px;background:linear-gradient(180deg,rgba(14,14,22,.9),rgba(14,14,22,.6));box-shadow:0 10px 28px rgba(0,0,0,.45)}
  .mut{color:var(--mut);font-size:13px}
  .board{margin-top:12px;border:1px solid var(--line);border-radius:14px;padding:16px;background:
    radial-gradient(600px 280px at 70% -10%,rgba(164,120,255,.08),transparent 60%),#0b0f1a}
  h1{font-size:22px;margin:8px 0}
  .big{font-size:18px;line-height:1.7;margin:0}
  .foot{display:flex;justify-content:space-between;align-items:center;gap:8px;flex-wrap:wrap;margin-top:12px}
  select{border:1px solid #3b3f59;background:#12121b;color:#eaf2ff;border-radius:10px;padding:7px 10px}
  .badge{border:1px solid #3b3f59;border-radius:999px;padding:3px 8px;font-size:12px;color:#cfe3ff}
  textarea{width:100%;min-height:120px;border:1px dashed #3b3f59;border-radius:10px;background:#0f0f17;color:#eaf2ff;padding:10px}
</style>
</head>
<body>
<header>
  <div class="row">
    <a class="btn" href=" " data-i18n="nav.home">ğŸ  è¿”å›é¦–é¡µ</a >
    <button class="btn" onclick="DUi18n.toggle()" id="langBtn">ğŸŒ EN/ä¸­æ–‡</button>
  </div>
  <div class="row">
    <button class="btn" onclick="duPay.modal()" data-i18n="cta.subscribe">ğŸ’ è®¢é˜… Pro</button>
  </div>
</header>

<div class="wrap">
  <div class="card">
    <h1 data-i18n="energy.title">ä»Šæ—¥èƒ½é‡å¡</h1>
    <div class="mut" data-i18n="energy.tip">é€‰æ‹©ä¸»é¢˜ï¼Œç¿»ä¸€å¼ å±äºä½ çš„å®‡å®™ç­¾è¯­ã€‚</div>

    <div class="row" style="margin-top:10px">
      <label class="mut" for="topic" data-i18n="energy.topic">ä¸»é¢˜</label>
      <select id="topic">
        <option value="heal" data-i18n="topic.heal">ç–—æ„ˆ</option>
        <option value="love" data-i18n="topic.love">å…³ç³»</option>
        <option value="wealth" data-i18n="topic.wealth">è´¢å¯Œ</option>
        <option value="focus" data-i18n="topic.focus">ä¸“æ³¨</option>
      </select>
      <span class="badge" id="badgeCount">â€”</span>
    </div>

    <div class="board">
      <p class="big" id="line">â€¦</p >
      <div class="foot">
        <div class="row">
          <button class="btn" id="prevBtn" data-i18n="energy.prev">ä¸Šä¸€å¼ </button>
          <button class="btn" id="nextBtn" data-i18n="energy.next">ä¸‹ä¸€å¼ </button>
          <button class="btn" id="shuffleBtn" data-i18n="energy.shuffle">éšæœº</button>
        </div>
        <div class="row">
          <button class="btn" id="copyBtn" data-i18n="energy.copy">å¤åˆ¶æ–‡æ¡ˆ</button>
          <button class="btn" id="shareBtn" data-i18n="energy.share">åˆ†äº«é“¾æ¥</button>
        </div>
      </div>
    </div>

    <details style="margin-top:12px">
      <summary class="mut" data-i18n="energy.import">æ‰¹é‡å¯¼å…¥è¯åº“ï¼ˆCSVï¼Œæ¯è¡Œä¸€å¥ï¼›å¯é€‰ #tagï¼‰</summary>
      <textarea id="csv" placeholder="åœ¨æ­¤ç²˜è´´ï¼šå¥å­, tag1 tag2"></textarea>
      <div class="row" style="margin-top:8px">
        <button class="btn" id="importBtn" data-i18n="energy.importBtn">å¯¼å…¥åˆ°å½“å‰ä¸»é¢˜</button>
        <span class="mut" id="importMsg"></span>
      </div>
    </details>
  </div>
   <div>
       <div class="card">
         <h3>ğŸ§˜ æ¯æ—¥å†¥æƒ³ä¸“å±é¢‘é“</h3>
         <p>é€ƒç¦»åˆ°ä½ ä¸“å±å°å®‡å®™</p>
       </div>
      <a class="pill" href="meditation.html">ğŸ§˜ è¿›å…¥å†¥æƒ³</a >

       <div class="card">
      <div>
        <h3>ğŸ ç”Ÿæˆ AI ç¤¼ç‰©å¡</h3>
        <p>AI + å…¨æ¯ + æƒ…æ„Ÿå¹²æ¶‰ï¼Œä¸€å¼ ä¼šå›åº”ä½ çš„ã€Œå®‡å®™çˆ±å¡ã€ã€‚</p>
        <button id="ecGift" class="pill">ğŸ ç”Ÿæˆ AI ç¤¼ç‰©å¡</button>
      </div>
  
  </div>

</div>

<script src="du-i18n.js"></script>
<script src="du-pay.js"></script>
<script>
// ===== é»˜è®¤è¯åº“ï¼ˆå¯éšæ—¶æ‰©å®¹/å¯¼å…¥ï¼‰ =====
const SEEDS = {
  heal: [
    "æŠŠâ€œå¿…é¡»â€æ”¹æˆâ€œæˆ‘é€‰æ‹©â€ã€‚",
    "è¯·æŠŠå®³æ€•æŠ˜æˆçº¸é¹¤ï¼Œæ”¾è¿›å£è¢‹ã€‚",
    "è®©ä»Šæ™šçš„é£æ›¿ä½ æ‰æ‰å¿ƒã€‚",
  ],
  love: [
    "ä½ æ˜¯ç­”æ¡ˆï¼Œä¸æ˜¯é—®é¢˜ã€‚",
    "è¢«ä½ çœ‹è§ï¼Œæ˜¯ä¸€ç§å‘å…‰ã€‚",
    "å®‡å®™åçˆ±ä¸ä½ ä¸²è”ã€‚",
  ],
  wealth: [
    "æŠŠæ³¨æ„åŠ›æŠ•ç»™ä¼šå¤åˆ©çš„äº‹ã€‚",
    "æŠŠæ—¶é—´å½“æˆä½ æœ€å¥½çš„åˆä¼™äººã€‚",
    "å°æ­¥å¿«è·‘ï¼Œä¹Ÿæœ‰æŒ‡æ•°æ›²çº¿ã€‚",
  ],
  focus: [
    "æŠŠæ‰‹æœºæ”¾ä¸‹ 25 åˆ†é’Ÿï¼Œä¸–ç•Œä¼šæ›´å®‰é™ã€‚",
    "å…ˆå†™ä¸€è¡Œï¼Œå†å†™ç¬¬äºŒè¡Œã€‚",
    "åš 1 ä»¶å¯¹ä½ é‡è¦çš„å°äº‹å°±å¥½ã€‚",
  ]
};

// ===== çŠ¶æ€ & å·¥å…· =====
const $ = s=>document.querySelector(s);
let curr = { topic:'heal', idx:0 };

function list(){ return SEEDS[curr.topic] || (SEEDS[curr.topic]=[]); }
function show(i){
  const arr=list(); if(!arr.length){ $('#line').textContent='(ç©º)'; $('#badgeCount').textContent='0'; return; }
  curr.idx = (i%arr.length+arr.length)%arr.length;
  $('#line').textContent = arr[curr.idx];
  $('#badgeCount').textContent = `${arr.length}`;
  localStorage.setItem('du_energy_state', JSON.stringify(curr));
}
function shuffle(){ const arr=list(); if(!arr.length) return; show(Math.floor(Math.random()*arr.length)); }

// ===== äº‹ä»¶ç»‘å®š =====
$('#topic').addEventListener('change', e=>{ curr.topic=e.target.value; curr.idx=0; show(0); });
$('#prevBtn').onclick = ()=> show(curr.idx-1);
$('#nextBtn').onclick = ()=> show(curr.idx+1);
$('#shuffleBtn').onclick = shuffle;
$('#copyBtn').onclick = async ()=>{
  try{ await navigator.clipboard.writeText($('#line').textContent); alert(DUi18n.get()==='zh'?'å·²å¤åˆ¶':'Copied!'); }catch(e){ alert('Copy failed');}
};
$('#shareBtn').onclick = ()=>{
  const url = new URL(location.href);
  url.searchParams.set('t', curr.topic);
  url.searchParams.set('i', curr.idx);
  navigator.clipboard.writeText(url.toString());
  alert(DUi18n.get()==='zh'?'å·²å¤åˆ¶é“¾æ¥':'Link copied');
};
$('#importBtn').onclick = ()=>{
  const txt = $('#csv').value.trim(); if(!txt) return;
  const lines = txt.split(/\n+/).map(s=>s.trim()).filter(Boolean);
  for(const ln of lines){
    const seg = ln.split(',')[0].trim();
    if(seg) list().push(seg);
  }
  $('#csv').value=''; $('#importMsg').textContent = (DUi18n.get()==='zh'?'å·²å¯¼å…¥ ':'Imported ')+lines.length;
  show(list().length-1);
};

// ===== æ¢å¤ URL / æœ¬åœ°çŠ¶æ€ =====
 ;(function(w){
  const KEY='du_lang';
  let lang = localStorage.getItem(KEY) || (navigator.language||'').toLowerCase().startsWith('zh') ? 'zh' : 'en';

  const dict = {
    zh:{
      "nav.home":"ğŸ  è¿”å›é¦–é¡µ",
      "cta.subscribe":"è®¢é˜… Pro",
      "energy.title":"ä»Šæ—¥èƒ½é‡å¡",
      "energy.tip":"é€‰æ‹©ä¸»é¢˜ï¼Œç¿»ä¸€å¼ å±äºä½ çš„å®‡å®™ç­¾è¯­ã€‚",
      "energy.topic":"ä¸»é¢˜",
      "topic.heal":"ç–—æ„ˆ","topic.love":"å…³ç³»","topic.wealth":"è´¢å¯Œ","topic.focus":"ä¸“æ³¨",
      "energy.prev":"ä¸Šä¸€å¼ ","energy.next":"ä¸‹ä¸€å¼ ","energy.shuffle":"éšæœº",
      "energy.copy":"å¤åˆ¶æ–‡æ¡ˆ","energy.share":"åˆ†äº«é“¾æ¥",
      "energy.import":"æ‰¹é‡å¯¼å…¥è¯åº“ï¼ˆCSVï¼Œæ¯è¡Œä¸€å¥ï¼›å¯é€‰ #tagï¼‰","energy.importBtn":"å¯¼å…¥åˆ°å½“å‰ä¸»é¢˜",
      "med.title":"ç²‰æ™¶å†¥æƒ³ Â· å‘¼å¸å¼•å¯¼","med.tip":"è·Ÿéšå…‰ç¯ï¼šå¸æ°”4ï½œåœ4ï½œå‘¼æ°”6ã€‚é€‰æ‹©é¢‘ç‡ä¸ç¯å¢ƒå±‚ï¼ŒæŒ‰ã€Œå¼€å§‹ã€ã€‚",
      "med.start":"å¼€å§‹","med.pause":"æš‚åœ","med.reset":"é‡ç½®",
      "flow.pomo":"ç•ªèŒ„é’Ÿ","flow.pomoTip":"é»˜è®¤ 25 / 5ï¼Œå®Œæˆåè‡ªåŠ¨è¿›å…¥ä¼‘æ¯","flow.plan":"Game Plan æ—¥å†","flow.add":"æ·»åŠ "
    },
    en:{
      "nav.home":"ğŸ  Home",
      "cta.subscribe":"Subscribe Pro",
      "energy.title":"Energy Card Â· Today",
      "energy.tip":"Pick a theme and draw a line from the universe.",
      "energy.topic":"Topic",
      "topic.heal":"Healing","topic.love":"Relationship","topic.wealth":"Wealth","topic.focus":"Focus",
      "energy.prev":"Prev","energy.next":"Next","energy.shuffle":"Shuffle",
      "energy.copy":"Copy","energy.share":"Share Link",
      "energy.import":"Bulk import CSV (one line per row; optional #tags)","energy.importBtn":"Import to current theme",
      "med.title":"Rose Quartz Meditation Â· Guided Breathing","med.tip":"Follow the ring: inhale 4 | hold 4 | exhale 6. Pick frequency & ambience.",
      "med.start":"Start","med.pause":"Pause","med.reset":"Reset",
      "flow.pomo":"Pomodoro","flow.pomoTip":"25/5 by default; auto switch to break","flow.plan":"Game Plan Calendar","flow.add":"Add"
    }
  };

  function t(key){ return (dict[lang] && dict[lang][key]) || key; }
  function apply(root=document){
    root.querySelectorAll('[data-i18n]').forEach(el=>{
      const key = el.getAttribute('data-i18n'); const txt = t(key);
      if(el.placeholder!==undefined && /placeholder/i.test(el.tagName)===false && el.hasAttribute('data-i18n-placeholder')){
        el.placeholder = txt;
      }
      el.textContent = txt;
    });
  }
  function set(l){ lang=l; localStorage.setItem(KEY,l); apply(); w.dispatchEvent(new CustomEvent('du:lang',{detail:l})); }
  function toggle(){ set(lang==='zh'?'en':'zh'); }

  w.DUi18n = { set, toggle, apply, get:()=>lang, dict };
  document.addEventListener('DOMContentLoaded', ()=> apply());
})(window);
(function init(){
  const u = new URL(location.href);
  const t = u.searchParams.get('t'); const i = +u.searchParams.get('i');
  const saved = JSON.parse(localStorage.getItem('du_energy_state')||'{}');
  curr.topic = t || saved.topic || 'heal';
  curr.idx   = Number.isFinite(i)? i : (saved.idx||0);
  $('#topic').value = curr.topic;
  show(curr.idx);
})();

// åˆ‡æ¢æŒ‰é’®æ–‡æ¡ˆ
window.addEventListener('du:lang', ()=>{
  $('#langBtn').textContent = (DUi18n.get()==='zh'?'ğŸŒ è‹±æ–‡':'ğŸŒ Chinese');
});
;(function(w,d){
  // æ”¹è¿™é‡Œå³å¯å…¨ç«™åˆ‡æ¢æ”¯ä»˜é“¾æ¥
  const CONF = {
    monthly: 'https://dodva-noise-gumx.vercel.app/api/checkout?plan=monthly',
    yearly:  'https://dodva-noise-gumx.vercel.app/api/checkout?plan=yearly',
    backTo:  'index.html#subscribe' // æ”¯æŒä»å­é¡µè·³å›é¦–é¡µè®¢é˜…åŒº
  };

  let inited=false, host=null;
  function init(){
    if(inited) return; inited=true;
    host = d.createElement('div'); host.style.cssText='position:fixed;inset:0;display:none;z-index:99999;background:rgba(0,0,0,.65);backdrop-filter:blur(6px)';
    host.innerHTML = `
      <div style="position:absolute;left:50%;top:50%;transform:translate(-50%,-50%);width:min(92vw,540px);background:#0b0f1a;border:1px solid #2a2f48;border-radius:16px;padding:18px;box-shadow:0 22px 60px rgba(0,0,0,.55)">
        <h3 style="margin:0 0 8px">ğŸ’ Dodva Pro</h3>
        <p style="margin:0 0 12px;color:#b8bed1;font-size:14px">AI é™ªä¼´ Â· ç™½å™ªéŸ³å¼•æ“ Â· å†¥æƒ³é¢‘é“ Â· ç©å…·æŸœæ‰©å±•</p >
        <div style="display:flex;gap:10px;flex-wrap:wrap">
          <a class="du-btn" href=" " style="flex:1;min-width:180px;text-align:center;border:1px solid #3b3f59;border-radius:10px;padding:10px 12px;background:#12121b;color:#eaf2ff;text-decoration:none">ğŸ’  $9.9 / æœˆ</a >
          <a class="du-btn" href="${CONF.yearly}"  style="flex:1;min-width:180px;text-align:center;border:1px solid #94a3b8;border-radius:10px;padding:10px 12px;background:#e2e8f0;color:#0b1220;text-decoration:none;font-weight:700">ğŸŒŒ $79 / å¹´</a >
        </div>
        <div style="display:flex;justify-content:space-between;align-items:center;margin-top:12px">
          <a href="${CONF.backTo}" style="color:#93c5fd;text-decoration:none">â‡  å›åˆ°è®¢é˜…è¯´æ˜</a >
          <button id="duPayClose" style="border:1px solid #3b3f59;border-radius:10px;background:transparent;color:#eaf2ff;padding:6px 10px;cursor:pointer">å…³é—­</button>
        </div>
      </div>`;
    d.body.appendChild(host);
    host.addEventListener('click', e=>{ if(e.target===host) close(); });
    d.getElementById('duPayClose').addEventListener('click', close);
  }
  function open(plan){
    init();
    if(typeof plan==='string' && CONF[plan]){
      location.href = CONF[plan]; return;
    }
    host.style.display='block';
  }
  function close(){ host.style.display='none'; }
  function set(k,v){ CONF[k]=v; }
  w.duPay = { open, modal: open, close, set, conf: CONF };
})(window, document);
</script>
</body>
</html>