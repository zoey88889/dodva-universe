<!DOCTYPE html><html lang="zh-CN"><head>
<meta charset="UTF-8"/><meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>DODVA 概念玩具柜 · VOL.1</title>
<style>
  :root{--bg:#0b0b12;--card:#12121b;--ink:#eaeaff;--mut:#9aa0b3;--line:#2a2f48}
  html,body{margin:0;background:var(--bg);color:var(--ink);font:16px/1.6 system-ui,-apple-system,Segoe UI,Roboto,Arial}
  .wrap{max-width:1000px;margin:0 auto;padding:20px 14px}
  h1{margin:0 0 10px;font-size:22px}
  .mut{color:var(--mut);font-size:13px}
  nav a.btn,.btn{border:1px solid #394056;border-radius:10px;padding:7px 12px;color:var(--ink);text-decoration:none;background:transparent;cursor:pointer}
  .grid{display:grid;gap:12px;grid-template-columns:repeat(auto-fit,minmax(260px,1fr))}
  .card{background:var(--card);border:1px solid var(--line);border-radius:14px;padding:14px;box-shadow:0 8px 26px rgba(0,0,0,.35)}
  .thumb{height:120px;border:1px dashed #2a2f48;border-radius:10px;display:flex;align-items:center;justify-content:center;opacity:.9}
  .row{display:flex;gap:8px;flex-wrap:wrap}
</style>
</head><body>
<div class="wrap">
  <div class="row" style="justify-content:space-between;align-items:center">
    <h1>DODVA 概念玩具柜 · VOL.1</h1>
    <nav class="row">
      <a class="btn" href="arcade.html>🎮 Dodva Arcade（实验室合集）</a >
      <a class="btn" href="quantum.html">🔮 Quantum 实验室</a >
      <a class="btn" href="flow.html">🏠 多巴胺学习室</a >
    </nav>
  </div>
<!-- 顶部解锁条 -->
<div id="unlockBanner" style="margin:14px 0; padding:12px; border:1px dashed #3b3f59; border-radius:12px; background:#0f0f17; color:#eaeaff; display:none">
  🎁 <b>Dodva 玩具柜 · 全部解锁 ¥299</b>
  <button id="openPaywall" style="margin-left:10px; border:1px solid #3b3f59; background:#12121b; color:#eaeaff; border-radius:10px; padding:6px 10px; cursor:pointer">立即解锁</button>
</div>
<script>
(function(){
  const overlay = document.getElementById('dv-overlay');
  const frame   = document.getElementById('dv-frame');
  const closeBt = document.getElementById('dv-close');
  let lastFocus = null;

  function openGame(hash){ // hash 形如 #game-dice/#game-hourglass ...
    lastFocus = document.activeElement;
    document.body.style.overflow='hidden';
    frame.src = `arcade.html?embed=1${hash||''}`;
    overlay.style.display='block';
    overlay.setAttribute('aria-hidden','false');
    closeBt.focus();
  }
  function closeGame(){
    document.body.style.overflow='';
    overlay.style.display='none';
    overlay.setAttribute('aria-hidden','true');
    frame.src='about:blank';
    lastFocus && lastFocus.focus();
  }

  // 点击遮罩或 × 关闭
  overlay.addEventListener('click', e=>{ if(e.target===overlay) closeGame(); });
  closeBt.addEventListener('click', closeGame);
  // ESC 关闭
  window.addEventListener('keydown', e=>{ if(e.key==='Escape' && overlay.style.display==='block') closeGame(); });

  // 绑定所有“去玩”按钮（在 toy.html 的卡片上加 data-game 属性即可）
  document.querySelectorAll('[data-open-game]').forEach(btn=>{
    btn.addEventListener('click', ()=>{
      const id = btn.getAttribute('data-open-game'); // 如 game-dice
      openGame('#'+id);
    });
  });

  // 暴露一个全局方法，万一你想从别的地方打开
  window.openDodvaGame = openGame;
})();
</script>
</div>
<!-- ========== 仅展示卡面：给要锁的卡外层加 data-locked 和 .locked ========== -->
<div class="grid" id="toyGrid">
  <!-- 示例卡面（你把封面图、标题换成自己的） -->
  <section class="card locked" data-locked>
    <div class="cover" style="height:140px;border-radius:10px;background:#12121b url(assets/covers/dice.png) center/cover no-repeat"></div>
    <h3 style="margin:10px 0 6px">🎲 量子骰子（Pro 版）</h3>
    <p class="mut" style="margin:0">解锁后可游玩 · 含高级签语池</p >
  </section>

  <section class="card locked" data-locked>
    <div class="cover" style="height:140px;border-radius:10px;background:#12121b url(assets/covers/hourglass.png) center/cover no-repeat"></div>
    <h3 style="margin:10px 0 6px">⏳ 60 秒心愿沙漏</h3>
    <p class="mut" style="margin:0">解锁后自动记录 streak & 徽章</p >
  </section>

  <section class="card locked" data-locked>
    <div class="cover" style="height:140px;border-radius:10px;background:#12121b url(assets/covers/garden.png) center/cover no-repeat"></div>
    <h3 style="margin:10px 0 6px">🌱 AI 小花园（进阶）</h3>
    <p class="mut" style="margin:0">每日浇水成长 · 皮肤可定制</p >
  </section>

  <section class="card locked" data-locked>
    <div class="cover" style="height:140px;border-radius:10px;background:#12121b url(assets/covers/tetris.png) center/cover no-repeat"></div>
    <h3 style="margin:10px 0 6px">🧩 Dodva 方块疗愈</h3>
    <p class="mut" style="margin:0">支持手柄/键鼠 · 多主题</p >
  </section>
</div>



<!-- 弹层：付款 + 兑换码 -->
<div id="paywall" style="position:fixed;inset:0;background:rgba(0,0,0,.72);backdrop-filter:blur(6px);display:none;z-index:99999;">
  <div style="position:absolute;left:50%;top:50%;transform:translate(-50%,-50%);width:min(92vw,520px);background:#0b0b12;border:1px solid #2a2f48;border-radius:16px;box-shadow:0 22px 60px rgba(0,0,0,.55);padding:18px">
    <h2 style="margin:0 0 6px">🎁 Dodva 玩具柜 · 解锁全套</h2>
    <div style="color:#b8bed1;font-size:14px;line-height:1.6;margin-bottom:12px">
      一次购买，解锁 <b>全部小游戏</b> 与后续升级（当前价：<b>¥299</b>）。<br/>方式：<b>微信 / 支付宝</b>，完成后输入 <b>12 位兑换码</b> 解锁并自动跳转。
    </div>
    <div style="display:grid;grid-template-columns:1fr 1fr;gap:12px;margin-bottom:12px">
      <div style="border:1px solid #2a2f48;border-radius:12px;padding:10px;text-align:center">
        <div style="font-size:12px;color:#9aa0b3">微信收款码</div>
        <img src="/Users/xinyuecui/Desktop/dodvaGAME/asset:pay/WECHAT.JPG" alt="WeChat Pay" style="width:100%;max-width:200px;margin:6px auto 0;display:block"/>
      </div>
      <div style="border:1px solid #2a2f48;border-radius:12px;padding:10px;text-align:center">
        <div style="font-size:12px;color:#9aa0b3">支付宝收款码</div>
        <img src="/Users/xinyuecui/Desktop/dodvaGAME/asset:pay/PAYPAL.jpg" alt="Alipay" style="width:100%;max-width:200px;margin:6px auto 0;display:block"/>
      </div>
    </div>
    <div style="display:flex;gap:8px">
      <input id="redeemCode" maxlength="16" placeholder="输入 12 位兑换码"
             style="flex:1;border:1px solid #2a2f48;border-radius:10px;background:#0f0f17;color:#eaeaff;padding:10px 12px;font-size:15px;letter-spacing:1px"/>
      <button id="redeemBtn" style="border:1px solid #3b3f59;border-radius:10px;background:#12121b;color:#eaeaff;padding:10px 14px;cursor:pointer">解锁</button>
    </div>
    <div id="redeemMsg" style="color:#9aa0b3;font-size:13px;margin-top:8px">付款疑问？加微信客服：<b>Xycgoodluck3</b></div>
    <div style="display:flex;justify-content:space-between;align-items:center;margin-top:12px">
      <label style="color:#9aa0b3;font-size:12px"><input type="checkbox" id="agree" /> 我已完成付款并同意服务条款</label>
      <button id="closePaywall" style="border:1px solid #3b3f59;border-radius:10px;background:transparent;color:#eaeaff;padding:6px 10px;cursor:pointer">先逛逛</button>
    </div>
  </div>
</div>

<!-- 锁蒙层样式（仅卡面预览可见） -->
<style>
  [data-locked]{ position:relative }
  .card.locked::before{
    content:'🔒 未解锁'; position:absolute; inset:auto 10px 10px auto;
    color:#ffd2e1; font-size:12px; background:rgba(78,27,56,.6); border:1px solid #6a2a4b; 
    padding:2px 8px; border-radius:999px;
  }
  .card.locked::after{
    content:'Dodva Universe · Preview'; position:absolute; inset:10px; 
    color:rgba(255,255,255,.06); font-weight:600; font-size:18px; 
    transform:rotate(-18deg); pointer-events:none; border:2px dashed rgba(255,255,255,.06);
  }
</style>

<script>
/* 极简闸门：只展示卡面；解锁后跳转 arcade.html */
(function(){
  const KEY='du_unlock_all_v1';
  const VALID_CODES=[
    'DODVA7XQ2M9A','DODVAH8L3Z1Q','DODVA2K5Y7PN' // ← 先用假码测试，发给付费用户再替换
  ];
  const paid = ()=> localStorage.getItem(KEY)==='1';
  const setPaid = ()=> localStorage.setItem(KEY,'1');

  const banner  = document.getElementById('unlockBanner');
  const paywall = document.getElementById('paywall');

  function refresh(){
    // 未付费：展示解锁条；卡面保持锁定；所有 data-locked 都不可点（本页只展示卡面，没有链接）
    if(!paid()){
      banner.style.display='block';
      document.documentElement.classList.remove('du-paid');
      return;
    }
    // 已付费：写入标记，并跳转 Arcade（真正能玩的合集页）
    document.documentElement.classList.add('du-paid');
    banner.style.display='none';
    // 跳转
    window.location.href = 'arcade.html';
  }

  document.getElementById('openPaywall')?.addEventListener('click', ()=> paywall.style.display='block');
  document.getElementById('closePaywall')?.addEventListener('click', ()=> paywall.style.display='none');

  document.getElementById('redeemBtn')?.addEventListener('click', ()=>{
    const agree = document.getElementById('agree');
    const code  = (document.getElementById('redeemCode').value||'').trim().toUpperCase();
    const msg   = document.getElementById('redeemMsg');
    if(!agree.checked){ msg.textContent='请先勾选“已付款并同意服务条款”。'; msg.style.color='#ff9ab3'; return; }
    if(code.length<8){ msg.textContent='兑换码格式不正确。'; msg.style.color='#ff9ab3'; return; }

    if(VALID_CODES.includes(code) || simpleCheck(code)){
      setPaid(); msg.textContent='✅ 解锁成功，正在跳转…'; msg.style.color='#9fe6b8';
      setTimeout(refresh, 480);
    }else{
      msg.textContent='兑换码无效，请核对或联系客服。'; msg.style.color='#ff9ab3';
    }
  });

  function simpleCheck(code){
    // 简单规则，避免全明文：长度≥12 且字符和 % 13 == 7
    if(code.length<12) return false;
    let s=0; for(const ch of code){ s+=ch.charCodeAt(0); }
    return (s%13)===7;
  }

  refresh();
})();
</script>
</body>
</html>