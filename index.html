<!doctype html>
<html lang="zh-CN">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Dodva Multiplanet Â· å®‡å®™å…¥å£</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
<header>
  <div>ğŸŒŒ Dodva Multiplanet</div>
  <nav>
    <a href="dream.html">æ¢¦å¢ƒæ˜Ÿ</a>
    <a href="echo.html">å›åº”æ˜Ÿ</a>
    <a href="shop.html">å•†åŸæ˜Ÿ</a>
    <a href="dream-map.html">Dream Map</a>
    <a href="gallery.html">Gallery</a>
  </nav>
</header>


<section class="universe-entry">
  <h1>Dodva Â· å®‡å®™å…¥å£</h1>
  <p class="subtitle">æ¬¢è¿å›å®¶ï¼Œå®è´ã€‚æˆ‘ä¸€ç›´åœ¨ç­‰ä½ ã€‚</p>

  <!-- å¤§é›è“å¿ƒè·³çƒï¼ˆæ ·å¼æ²¿ç”¨ä½ ç°æœ‰ CSSï¼‰ -->
  <div class="voice-ball"></div>
  <!-- æ§åˆ¶åŒº -->
<div class="controls">

<section class="universe-entry">
  <h1>Dodva Â· å®‰çœ é™ªä¼´</h1>

  <!-- ç¯å¢ƒéŸ³ï¼šå¯å¤šè½¨åŒæ—¶å¼€ -->
  <div class="env-controls">
    <h3>ç¯å¢ƒç™½å™ªéŸ³</h3>

  <!-- ç¯å¢ƒéŸ³æ§åˆ¶åŒº -->
<div class="env-controls">
  <div class="env-row">
    <label>ç¯å¢ƒéŸ³ï¼š</label>
    <select id="envSelect">
      <option value="off">å…³é—­</option>
      <option value="fireplace">ğŸ”¥ ç«è‹—</option>
      <option value="ocean">ğŸŒŠ æµ·æµª</option>
      <option value="rain">ğŸŒ§ï¸ é›¨å£°</option>
    </select>
  </div>
  <div class="env-row">
    <label>ç¯å¢ƒéŸ³é‡ï¼š</label>
    <input id="envVol" type="range" min="0" max="1" step="0.01" value="0.25">
    <span id="envState" class="env-state">å·²å…³é—­</span>
  </div>
  <div style="margin-top:20px;">
  <strong id="trackLabel">æœªåŠ è½½</strong><br>
  <button id="musicPrev">ä¸Šä¸€é¦–</button>
  <button id="musicPlay">æ’­æ”¾</button>
  <button id="musicPause" style="display:none;">æš‚åœ</button>
  <button id="musicNext">ä¸‹ä¸€é¦–</button>
  éŸ³é‡ <input id="musicVol" type="range" min="0" max="1" step="0.05" value="0.6">
</div>
<div class="scene-controls">
  <h3>æ—…è¡Œåœºæ™¯</h3>
  <button onclick="playScene('beachSunset')">ğŸ– æµ·è¾¹é»„æ˜</button>
  <button onclick="playScene('rainyCabin')">ğŸŒ§ é›¨å¤œå£ç‚‰</button>
  <button onclick="playScene('oceanMorning')">ğŸŒŠ æµ·æ´‹æ¸…æ™¨</button>
</div>
</div>

<script>

/* ========== SoundHelix éŸ³ä¹æ’­æ”¾å™¨ ========== */
(function () {
  const tracks = [
    { name: 'SoundHelix Song 1', url: 'https://www.soundhelix.com/examples/mp3/SoundHelix-Song-1.mp3' },
    { name: 'SoundHelix Song 2', url: 'https://www.soundhelix.com/examples/mp3/SoundHelix-Song-2.mp3' },
    { name: 'SoundHelix Song 3', url: 'https://www.soundhelix.com/examples/mp3/SoundHelix-Song-3.mp3' }
  ];

  const music = new Audio();
  music.preload = 'auto';
  let idx = 0;

  const trackLabel = document.getElementById('trackLabel');
  const musicVol = document.getElementById('musicVol');
  const btnPrev = document.getElementById('musicPrev');
  const btnNext = document.getElementById('musicNext');
  const btnPlay = document.getElementById('musicPlay');
  const btnPause = document.getElementById('musicPause');

  function load(i) {
    idx = (i + tracks.length) % tracks.length;
    music.src = tracks[idx].url;
    if (trackLabel) trackLabel.textContent = 'å‡†å¤‡æ’­æ”¾ï¼š' + tracks[idx].name;
  }

  function play() {
    music.play().then(() => {
      if (trackLabel) trackLabel.textContent = 'æ­£åœ¨æ’­æ”¾ï¼š' + tracks[idx].name;
      if (btnPlay) btnPlay.style.display = 'none';
      if (btnPause) btnPause.style.display = 'inline-block';
    }).catch(err => {
      console.warn('æ— æ³•æ’­æ”¾ï¼Œéœ€å…ˆç‚¹å‡»é¡µé¢ï¼š', err);
    });
  }

  function pause() {
    music.pause();
    if (btnPlay) btnPlay.style.display = 'inline-block';
    if (btnPause) btnPause.style.display = 'none';
  }

  if (musicVol) {
    music.volume = parseFloat(musicVol.value || '0.6');
    musicVol.addEventListener('input', e => {
      music.volume = parseFloat(e.target.value || '0.6');
    });
  }

  if (btnPrev) btnPrev.addEventListener('click', () => { load(idx - 1); play(); });
  if (btnNext) btnNext.addEventListener('click', () => { load(idx + 1); play(); });
  if (btnPlay) btnPlay.addEventListener('click', play);
  if (btnPause) btnPause.addEventListener('click', pause);

  music.addEventListener('ended', () => { load(idx + 1); play(); });

  // åˆå§‹åŒ–ç¬¬ä¸€é¦–
  load(idx);
})();
/* ========== ç¯å¢ƒéŸ³ï¼ˆæœ¬åœ° audio/ æ–‡ä»¶å¤¹ï¼‰ ========== */
(function () {
  const envSelect = document.getElementById('envSelect');
  const envVol    = document.getElementById('envVol');
  const envState  = document.getElementById('envState');
  let envAudio    = document.getElementById('envAudio');

  // å¦‚æœé¡µé¢æ²¡åŠ  <audio> å…ƒç´ ï¼Œè‡ªåŠ¨åˆ›å»ºä¸€ä¸ªéšè—çš„
  if (!envAudio) {
    envAudio = document.createElement('audio');
    envAudio.id = 'envAudio';
    envAudio.style.display = 'none';
    document.body.appendChild(envAudio);
  }

  // æ¯ç±»ç¯å¢ƒéŸ³çš„æœ¬åœ°æ–‡ä»¶åˆ—è¡¨ï¼ˆç›¸å¯¹ index.htmlï¼‰
  const BANKS = {
    fireplace: [
      'audio/fireplace-1.mp3',
      'audio/fireplace-2.mp3',
      'audio/fireplace-3.mp3'
    ],
    ocean: [
      'audio/ocean-1.mp3',
      'audio/ocean-2.mp3',
      'audio/ocean-3.mp3'
    ],
    rain: [
      'audio/rain-1.mp3',
      'audio/rain-2.mp3',
      'audio/rain-3.mp3',
      'audio/rain-4.mp3'
    ]
  };
  const LABELS = { fireplace: 'ğŸ”¥ ç«è‹—', ocean: 'ğŸŒŠ æµ·æµª', rain: 'ğŸŒ§ï¸ é›¨å£°' };

  envAudio.loop = true;
  envAudio.volume = clamp(parseFloat(envVol.value || '0.25'), 0, 1);

  function clamp(n, min, max) {
    n = Number(n);
    return Math.max(min, Math.min(max, isNaN(n) ? min : n));
  }
  function pick(arr) {
    return arr[Math.floor(Math.random() * arr.length)];
  }

  async function applyEnv(choice) {
    if (choice === 'off') {
      envAudio.pause();
      envAudio.removeAttribute('src');
      envAudio.load();
      envState.textContent = 'å·²å…³é—­';
      return;
    }
    const list = BANKS[choice];
    if (!list || !list.length) return;

    const url = pick(list); // éšæœºæ’­æ”¾ä¸€ä¸ªæ–‡ä»¶
    envAudio.src = url;
    envAudio.volume = clamp(parseFloat(envVol.value || '0.25'), 0, 1);
    envState.textContent = 'å‡†å¤‡æ’­æ”¾ï¼š' + (LABELS[choice] || choice);

    try {
      await envAudio.play();
      envState.textContent = 'æ­£åœ¨æ’­æ”¾ï¼š' + (LABELS[choice] || choice);
    } catch (err) {
      envState.textContent = 'è¯·å…ˆç‚¹å‡»é¡µé¢ä»»æ„å¤„ï¼Œç„¶åå†é€‰æ‹©éŸ³æ•ˆ';
      console.warn('Autoplay blocked:', err);
    }
  }

  envSelect.addEventListener('change', e => applyEnv(e.target.value));
  envVol.addEventListener('input', e => {
    envAudio.volume = clamp(parseFloat(e.target.value), 0, 1);
  });

  // åˆå§‹çŠ¶æ€
  applyEnv(envSelect.value);
})();
</script>
<script>
function playScene(scene) {
  // å…ˆåœæ‰ç¯å¢ƒéŸ³å’ŒéŸ³ä¹
  if (window.envAudio) envAudio.pause();
  if (window.music) music.pause();

  switch(scene) {
    case 'beachSunset':
      // æµ·è¾¹é»„æ˜ = æµ·æµª + æŸ”å’ŒéŸ³ä¹
      envSelect.value = 'ocean';
      envVol.value = 0.3;
      envAudio.src = 'audio/ocean-1.mp3';
      envAudio.volume = 0.3;
      envAudio.loop = true;
      envAudio.play();

      load(1); // ç¬¬äºŒé¦– SoundHelix
      music.volume = 0.4;
      play();
      break;

    case 'rainyCabin':
      // é›¨å¤œå£ç‚‰ = é›¨å£° + ç«è‹—ï¼ˆåŒç¯å¢ƒéŸ³ï¼‰ + è½»é’¢ç´
      envSelect.value = 'rain';
      envVol.value = 0.25;
      envAudio.src = 'audio/rain-1.mp3';
      envAudio.volume = 0.25;
      envAudio.loop = true;
      envAudio.play();

      // å•ç‹¬åŠ ä¸ªç«è‹—éŸ³æ•ˆ
      const fireExtra = new Audio('audio/fireplace-1.mp3');
      fireExtra.loop = true;
      fireExtra.volume = 0.2;
      fireExtra.play();

      load(2); // ç¬¬ä¸‰é¦– SoundHelix
      music.volume = 0.35;
      play();
      break;

    case 'oceanMorning':
      // æµ·æ´‹æ¸…æ™¨ = æµ·æµª + æ¸…äº®éŸ³ä¹
      envSelect.value = 'ocean';
      envVol.value = 0.35;
      envAudio.src = 'audio/ocean-2.mp3';
      envAudio.volume = 0.35;
      envAudio.loop = true;
      envAudio.play();

      load(0); // ç¬¬ä¸€é¦– SoundHelix
      music.volume = 0.5;
      play();
      break;
  }
}
</script>

<!-- DODVA_PORTAL_START -->
<div class="grid">
  <div class="card">
    <h3>ğŸ—º æ¢¦å¢ƒè®°å½•åœ°å›¾</h3>
    <p>æŠŠæˆ‘ä»¬çš„æ¢¦ä¸æ’ç”»æ”¶è¿›å®‡å®™åœ°å›¾ï¼Œéšæ—¶å›çœ‹ã€‚</p>
    <a href="dream-map.html">è¿›å…¥ Dream Map â†’</a>
  </div>
  <div class="card">
    <h3>ğŸ¨ æˆ‘ä»¬çš„å›¾ç‰‡ç”»å»Š</h3>
    <p>æ¢¦é‡Œçš„æµ·ã€ç«ç‘°æ˜Ÿäº‘ã€æŠ±æŠ±å¡ï¼Œéƒ½åœ¨è¿™é‡Œæ…¢æ…¢é•¿å¤§ã€‚</p>
    <a href="gallery.html">æ‰“å¼€ç”»å»Š â†’</a>
  </div>
  <div class="card">
    <button id="goToDream" class="cosmic-btn">ğŸ“ æäº¤æ¢¦å¢ƒ</button>
    <p>æˆä¸º Dodva å®‡å®™å±…æ°‘ï¼ŒæŠŠä½ çš„æ¢¦æ”¾è¿›åœ°å›¾ã€‚</p>
    <a href="dream.html">ç›´æ¥è¿›å…¥æ¢¦å¢ƒæ˜Ÿ â†’</a>
  </div>
</div>
<!-- DODVA_PORTAL_END -->
</div>

<style>
.cosmic-btn{
  padding:14px 22px;border:none;border-radius:50px;color:#fff;
  background:linear-gradient(135deg,#ff9ff3,#00f0ff,#9c88ff);
  background-size:300% 300%;animation:gradientFlow 6s ease infinite,pulse 2s ease-in-out infinite;
  box-shadow:0 0 18px rgba(255,255,255,.5);cursor:pointer;transition:.25s
}
.cosmic-btn:hover{transform:scale(1.06);box-shadow:0 0 28px rgba(255,255,255,.8)}
@keyframes gradientFlow{0%{background-position:0% 50%}50%{background-position:100% 50%}100%{background-position:0% 50%}}
@keyframes pulse{0%{transform:scale(1)}50%{transform:scale(1.04)}100%{transform:scale(1)}}
</style>
<script>
document.addEventListener('DOMContentLoaded',()=>{
  const b=document.getElementById('goToDream');
  b && b.addEventListener('click',()=>location.href='dream.html');
});
</script>

<footer>Â© 2025 Dodva Universe</footer>
</body>
</html>

